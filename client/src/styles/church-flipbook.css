@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

.flipbook { position: relative; width: min(720px, 90vw); height: min(460px, 65vh); }
.book-stage { position: relative; width: 100%; height: 100%; perspective: 1600px; }
.book-spine { position: absolute; top: 0; left: 50%; width: 6px; height: 100%; transform: translateX(-50%); background: linear-gradient(#4b3900, #1f1600); box-shadow: 0 0 20px rgba(255,215,0,0.25); z-index: 2; }

.page { position: absolute; top: 0; width: 50%; height: 100%; background: #0b0a08 url('/textures/paper-texture.jpg'); background-size: cover; background-position: center; border: 3px solid #ffd700; box-shadow: inset 0 0 30px rgba(255,215,0,0.12), 0 18px 40px rgba(0,0,0,0.6); overflow: hidden; }
.page.left { left: 0; border-right-width: 0; border-radius: 10px 0 0 10px; }
.page.right { right: 0; border-left-width: 0; border-radius: 0 10px 10px 0; }
.page-content { display: flex; flex-direction: column; align-items: center; gap: 10px; padding: 18px; font-family: 'Press Start 2P', cursive; height: 100%; justify-content: center; color: #3b3b3b; text-align: center; }
.page-art { width: 70%; height: 55%; object-fit: cover; border: 2px solid #ffd700; box-shadow: 0 0 15px rgba(255,215,0,0.25); }
.page-title { font-size: 12px; color: #3f3f3f; text-shadow: 0 0 6px rgba(0,0,0,0.2); }
.page-sub { font-size: 9px; color: #6a6a6a; }
.page-btn { margin-top: 8px; border: 3px solid #ffd700; background: rgba(0,0,0,0.8); color: #e6e1cf; padding: 8px 12px; cursor: pointer; }
.page-btn:hover { background: rgba(255,215,0,0.15); box-shadow: 0 0 15px #ffd700; }

/* page outer edge glow */
.page.left::after, .page.right::after { content: ""; position: absolute; top: 0; bottom: 0; width: 22px; pointer-events: none; }
.page.left::after { right: 0; background: linear-gradient(to left, rgba(0,0,0,0.45), rgba(0,0,0,0)); }
.page.right::after { left: 0; background: linear-gradient(to right, rgba(0,0,0,0.45), rgba(0,0,0,0)); }

.turning { position: absolute; top: 0; width: 50%; height: 100%; background: #0b0a08 url('/textures/paper-texture.jpg'); background-size: cover; background-position: center; pointer-events: none; z-index: 3; border: 3px solid #ffd700; box-shadow: inset 0 0 30px rgba(255,215,0,0.12), 0 18px 40px rgba(0,0,0,0.6); backface-visibility: hidden; transform-style: preserve-3d; }
.turning.from-left { left: 0; transform-origin: right center; }
.turning.from-right { right: 0; transform-origin: left center; }

/* rtol: flip right page onto left (arc outward) */
.flipping-rtol .turning.from-right { animation: pageTurnOutFromRight 0.56s cubic-bezier(.4,.2,.2,1) forwards; }
/* ltor: flip left page onto right (arc outward) */
.flipping-ltor .turning.from-left { animation: pageTurnOutFromLeft 0.56s cubic-bezier(.4,.2,.2,1) forwards; }

/* keep static pages nearly still; add subtle depth only */
.flipping-rtol .page.left { animation: pageSettle 0.56s ease forwards; }
.flipping-ltor .page.right { animation: pageSettle 0.56s ease forwards; }

@keyframes pageSettle { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(0deg); } }

/* outward arc rotations toward the opposite page */
@keyframes pageTurnOutFromRight {
  0%   { transform: rotateY(0deg) translateZ(0); }
  50%  { transform: rotateY(90deg) translateZ(28px); }
  100% { transform: rotateY(178deg) translateZ(0); }
}
@keyframes pageTurnOutFromLeft {
  0%   { transform: rotateY(0deg) translateZ(0); }
  50%  { transform: rotateY(-90deg) translateZ(28px); }
  100% { transform: rotateY(-178deg) translateZ(0); }
}

.book-control { position: absolute; top: 50%; transform: translateY(-50%); width: 44px; height: 44px; border-radius: 50%; border: 2px solid #ffd700; color: #ffd700; background: rgba(0,0,0,0.6); cursor: pointer; z-index: 4; display: flex; align-items: center; justify-content: center; transition: all 0.25s ease; }
.book-control.left { left: -8px; }
.book-control.right { right: -8px; }
.book-control:disabled { opacity: 0.35; cursor: default; }
.book-control:hover:not(:disabled) { box-shadow: 0 0 14px #ffd700; transform: translateY(-50%) scale(1.05); }

@media (max-width: 768px) {
  .flipbook { width: 95vw; height: 55vh; }
  .page-art { width: 80%; height: 50%; }
}


